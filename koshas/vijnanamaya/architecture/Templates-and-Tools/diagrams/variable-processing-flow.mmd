graph TB
    %% Input Sources
    subgraph InputSources["Input Layer"]
        B[Browser Context]
        U[User Input]
        S[System State]
    end

    %% Validation Layer
    subgraph ValidationLayer["Validation Layer"]
        subgraph TypeValidation["Type Validation"]
            TV1[Pattern Type Check]
            TV2[Depth Level Check]
            TV3[Tag Format Check]
        end

        subgraph CoherenceValidation["Coherence Validation"]
            CV1[Pattern Integrity]
            CV2[System Coherence]
            CV3[Integration Points]
        end

        subgraph StateValidation["State Validation"]
            SV1[Runtime State]
            SV2[Processing Mode]
            SV3[Field Stability]
        end
    end

    %% Processing Layer
    subgraph ProcessingLayer["Processing Matrix"]
        subgraph PatternProcessing["Pattern Processing"]
            PP1[Pattern Recognition]
            PP2[Technical Mapping]
            PP3[Field Integration]
        end

        subgraph StateProcessing["State Processing"]
            SP1[Coherence Analysis]
            SP2[Stability Check]
            SP3[Integration Validation]
        end

        subgraph OutputProcessing["Output Processing"]
            OP1[Result Generation]
            OP2[Error Handling]
            OP3[Debug Information]
        end
    end

    %% Error Handling
    subgraph ErrorHandling["Error Handling System"]
        EH1[Validation Errors]
        EH2[Processing Errors]
        EH3[System State Errors]
        
        subgraph ErrorRecovery["Recovery Protocols"]
            ER1[Auto-Correction]
            ER2[Fallback States]
            ER3[Debug Logging]
        end
    end

    %% Connections
    B --> TV1
    U --> TV2
    S --> TV3

    TV1 --> CV1
    TV2 --> CV2
    TV3 --> CV3

    CV1 --> PP1
    CV2 --> PP2
    CV3 --> PP3

    PP1 --> SP1
    PP2 --> SP2
    PP3 --> SP3

    SP1 --> OP1
    SP2 --> OP2
    SP3 --> OP3

    %% Error Flows
    TV1 -.-> EH1
    CV2 -.-> EH2
    SP3 -.-> EH3

    EH1 --> ER1
    EH2 --> ER2
    EH3 --> ER3

    style InputSources fill:#1C2237,stroke:#00D8FF
    style ValidationLayer fill:#0A0A0A,stroke:#FFCC33
    style ProcessingLayer fill:#1C2237,stroke:#8B5CF6
    style ErrorHandling fill:#1C2237,stroke:#FF6B6B